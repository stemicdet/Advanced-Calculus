<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="notes-week-03">
  <title>Week 3: A Continuous Nowhere Differentiable Function (5.4)</title>

 

  <!-- Can also be <handout> instead of <subsection> to get a printable version -->
  <subsection xml:id="subsection-3-1" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title> Non-differentiability</title>

<p>
    We saw that the absolute value function fails to be differentiable at <m>0</m> because of the sharp corner at <m>0</m>.
</p>

<p>
    Given a finite set of points, it is possible to construct a continuous function with a sharp corner at each point and thus we have a continuous function that fails to be differentiable at a finite set of points.
</p>

<p>
    It is possible to construct a continuous function that is nondifferentiable at infinitely many points. Let <m>h(x) = |x|</m> on the interval <m>[-1,1]</m> and then extend <m>h(x)</m> to all <m>\mathbf{R}</m> through the relation <m>h(x+2) = h(x)</m>. This function is nondifferentiable at all the integers.
</p>

<figure>
      <caption>A continuous function that is non-differentiable at infinitely many points.</caption>
      <image source="desmos-graph (19) (1).png" width="50%">
        <description>A picture of a continuous function that is non-differentiable at infinitely many points. The function looks like an infinitely long row of teeth and is not differentiable at the point of each tooth.</description>
      </image>
    </figure>

  <p>
    Is it possible to construct a function that is continuous everywhere but that is non-differentiable at uncountably many points?
  </p> 
  
  <p>
    Around 1830 Bernard Bolzano constructed a function that is continuous everywhere but fails to be differentiable at every point in <m>\mathbf{R}</m>; however, he never published this result.
  </p>

  <p>
    About 1860 Charles Cellerier constructed another function that is everywhere continuous but nowhere differentiable. He also never published his result.
  </p>

  <p>
    The first published example of a function that is everywhere continuous and nowhere differentiable is due to Karl Weierstrass in 1872.
  </p>

  <figure>
      <caption>Weierstrass' example of a function that is everywhere continuous but nowhere differentiable.</caption>
      <image source="1920px-WeierstrassFunction.svg.png" width="50%">
        <description>A picture of the graph of a function that consists entirely of jagged edges. One of the edges is zoomed in to show that inside the edges the function has the same shape as the entire graph, which demonstrates the fractal nature of this graph.</description>
      </image>
    </figure>

    <p>
      Quotes about the Weierstrass Function:
      <ul>
        <li>
          <p>
            <em>An outrage against common sense</em> -- Henri Poincare
          </p>
        </li>
        <li>
          <p>
            <em>I turn with terror and horror from this lamentable scourge of functions with no derivatives.</em> -- Charles Hermite
          </p>
        </li>
        <li>
          <p>
            <em>[Up to that time] one would have said that a continuous function is essentially capable of being represented by a curve, and that a curve has always a tangent. Such reasoning has no mathematical value whatever; it is founded on intuition, or rather on a visible representation. ... By the discovery of this striking example Weierstrass has accordingly given us a useful reminder, and has taught us better to appreciate the faultless and purely arithmetical methods with which he more than any one has enriched our science.</em> -- Henri Poincare
          </p>
        </li>
      </ul>
    </p>

    <p>
      Although nowhere differentiable continuous functions were created to challenge previously held beliefs in mathematics, they do have important physical applications.
    </p>

    <p>
      In 1905 Albert Einstein published a paper which demonstrated the existence of atoms. In this paper Einstein showed that atoms exhibit <em>Brownian Motion</em> which means that they follow a random path because they are constantly bombarded by other particles which changes their direction of motion.
    </p>

    <p>
      Because of this randomness, the path of an object that exhibits Brownian motion can't be modeled by a smooth curve. One must use a continuous non-differentiable function to model Brownian motion.
    </p>

    <p>
      Weierstrass' original function was the function <md>
        f(x) = \sum_{n=0}^{\infty} a_n \cos(b^n x)
      </md>

      where <m>a</m> and <m>b</m> are carefully chosen real numbers.
      
    </p>

    <p>
      The Weierstrass function is an example of a Fourier series, which is an infinite sum of sines and cosines.
    </p>

    <p>
      Remarkably the Weierstrass function is nowhere differentiable despite the fact that the functions in the sum are infinitely differentiable everywhere.
    </p>

    <p>
      We will give another example of an everywhere continuous nowhere differentiable function. Recall that <m>h(x) = |x|</m> on <m>[-1,1]</m> and is extended to all <m>\mathbf{R}</m> by the functional equation <m>h(x+2) = h(x)</m>.
    </p>

    <p>
      Let <m>h_n(x) = \frac{1}{2^n}h(2^nx)</m>. 
    </p>

    <p>
      Let
      <md>
        g(x) = \sum_{n=0}^{\infty} h_n(x) = \sum_{n=0}^{\infty}\frac{1}{2^n}h(2^nx)
      </md>
      
    </p>

    <p>
      We will show that <m>g(x)</m> is continuous on all <m>\mathbf{R}</m> but differentiable nowhere.
    </p>

    <p>
      The graph below shows <m>h_0(x)</m> in orange, <m>h_1(x)</m> in green and <m>h_2(x)</m> in blue.
    </p>

    <figure>
      <caption> The first 3 terms of <m>g(x)</m>.</caption>
      <image source="desmos-graph (20) (1).png" width="50%">
        <description>A picture of the graphs of three functions. The first in orange is the graph of <m>h_0</m>. It looks like a triangle starting at <m>(0,0)</m>, which rises up to <m>(1,1)</m> before falling down to <m>(2,0)</m>. Then it repeats indefinitely. The second graph in green is the graph of <m>h_1</m>. It looks like a triangle starting at <m>(0,0)</m> that rises up to <m>(\frac{1}{2}, \frac{1}{2})</m> before falling down to <m>(1,0)</m>. Then it repeats this pattern indefinitely. The final graph in blue is the graph of <m>h_2</m>. It is a triangle that starts at <m>(0,0)</m> and rises to <m>(\frac{1}{4}, \frac{1}{4})</m> before falling to <m>(\frac{1}{2},0)</m>. The it repeats indefinitely </description>
      </image>
    </figure>

  </subsection>

  <subsubsection xml:id="subsubsec-3-2">
    <title>Continuity of <m>g(x)</m></title>
    

    <p>
      We first need to show that <m>g(x)</m> is well defined for all <m>x \in \mathbf{R}</m> by showing that the infinite sum converges for all <m>x</m>.
    </p>

    <p>
      Since <m>|h(x)|\leq 1</m>, <m>\frac{1}{2^n}h(2^n x) \leq \frac{1}{2^n}</m>. Hence by the comparison test
      <md>
        g(x)=   \sum_{n=0}^{\infty}\frac{1}{2^n}h(2^nx) \leq \sum_{n=0}^{\infty}\frac{1}{2^n} = 2
      </md>
      Thus <m>g(x)</m> is defined for all <m>x \in \mathbf{R}</m>.
    </p>

    <p>
      Since <m>h(x)</m> is continuous it follows from the algebraic limit theorem that the finite sum
      <md>
        g_m(x) = \sum_{n=0}^m \frac{1}{2^n}h(2^n x)
      </md>
      is continuous.
    </p>

    <p>
      It is not necessarily the case that an infinite sum of continuous functions will still be continuous. Determining when the limit of a sequence of continuous functions or an infinite sum of functions is continuous will be one of the main goals of Chapter 6.
    </p>

    <p>
      After that chapter we will see that this particular sum is in fact continuous on all <m>\mathbf{R}</m>
    </p>

  </subsubsection>

  <subsubsection xml:id="subsubsec-3-3">
    <title>Non-differentiability of <m>g(x)</m></title>

    <p>
      We will first show that <m>g(x)</m> is not differentiable at <m>0</m>. Consider the sequence <m>x_m = 1/2^m</m>, where <m>m = 0, 1, 2, \ldots</m>
    </p>

    <p>
      It follows from the definition of the derivative that if <m>g(x)</m> is differentiable at <m>0</m> then
      <md>
        g'(0) = \lim_{m\to \infty} \frac{g(x_m)-g(0)}{x_m - 0} = \lim_{m\to \infty} \frac{\displaystyle \sum_{n=0}^{\infty} 2^{-n}h(2^{n-m})}{2^{-m}}
      </md>
      
    </p>

    <p>
      There are three cases to consider:
      <ol>
        <li>
          <p>
            <m>m &lt; n</m>: Then <m>2^{n-m}</m> is a multiple of 2 and thus <m>h(2^{m-n})=0</m>
          </p>
        </li>
        <li>
          <p>
            Case 2: <m>m=n</m>: Then <m>2^{n-m} = 1</m> so <m>h(2^{m-n}) = 1</m>.
          </p>
        </li>
        <li>
          <p>
            Case 3: <m>m>n</m>: Then <m>2^{n-m} &lt; 1</m> and hence <m>h(2^{m-n}) = 2^{m-n}</m>.
          </p>
        </li>
      </ol>
    </p>
    

    <p>
      Putting this all together we get
      <md>
        <mrow> g'(0) \amp = \lim_{m\to \infty} \frac{\displaystyle \sum_{n=0}^{m-1} 2^{-n}h(2^{n-m}) + 2^{-m} + \sum_{n=m+1}^{\infty} 2^{-n}h(2^{n-m})}{2^{-m}}</mrow>
        <mrow> \amp =\lim_{m\to \infty} 2^m \left(\sum_{n=0}^{m-1} 2^{-m} + 2^{-m} \right)</mrow>
        <mrow> \amp =\lim_{m\to \infty} m+1</mrow>
      </md>
    </p>

    <p>
      Since the limit is undefined, <m>g'(0)</m> does not exist and <m>g</m> is not differentiable at <m>0</m>.
    </p>

    <p>
      A similar argument shows that <m>g'(x)</m> does not exist whenever <m>x</m> is a rational number of the form <m>\frac{p}{2^k}</m> where <m>p</m> is an integer and <m>k</m> is a positive integer.
    </p>

    <p>
      These points are called dyadic points. Because the dyadic points are dense in the real numbers there is reason to suppose that <m>g(x)</m> is non-differentiable at every real number.
    </p>

    <p>
      Suppose that <m>x</m> is not a dyadic number. Then for a fixed value of <m>m</m> <m>x</m> lies between 2 adjacent dyadic points
      <md>
        \frac{p_m}{2^m} &lt; x &lt; \frac{p_m+1}{2^m}
      </md>
      
    </p>

    <p>
      Set <m>x_m = \frac{p_m}{2^m}</m> and <m>y_m = \frac{p_m+1}{2^m}</m>. Repeating this for each <m>m</m> yields sequences <m>(x_m)</m> and <m>(y_m)</m> such that <m>\lim x_m = \lim y_m = x</m> and <m>x_m &lt; x &lt; y_m</m>
    </p>

   <lemma xml:id="lem-nondiff">
    <statement>
      <p>
        If <m>(a_n)</m> and <m>(b_n)</m> are sequences satisfying <m>a_n &lt; a &lt; b_n</m> and <m>\lim a_n = \lim b_n = a</m> then 
        <md>
          f'(a) = \lim_{n \to \infty} \frac{f(b_n)-f(a_n)}{b_n - a_n}.
        </md>
        
      </p>
    </statement>
   </lemma>

   <proof>
    <p>
      <md>
        f'(a) = \lim_{x\to a} \frac{f(x)-f(a)}{x - a} 
      </md>
      
    </p>

    <p>
      Let <m>x = b_n</m>. Then <m>x\to a</m> as <m>n \to \infty</m> so
      <md>
        f'(a) = \lim_{n\to \infty} \frac{f(b_n)-f(a)}{b_n - a}
      </md>

      But <m>a = \displaystyle \lim_{n\to \infty} a_n </m>. Thus
      <md>
        f'(a) = \lim_{n \to \infty} \frac{f(b_n)-f(a_n)}{b_n - a_n}.
      </md>
      
      
    </p>
   </proof>

   <p>
    We will use the lemma to show that <m>g'(x)</m> can't exist for all <m>x</m>. Recall that <m>x_m = \frac{p_m}{2^m}</m> and <m>y_m = \frac{p_m+1}{2^m}</m> are sequences such that <m>\lim x_m = \lim y_m = x</m> and <m>x_m &lt; x &lt; y_m</m>.
   </p>

   <p>
    Thus if <m>g'(x)</m> exists then by the lemma 
    <md>
      g'(x) = \lim_{m \to \infty} \frac{g(y_m)-g(x_m)}{y_m-x_m} = \lim_{m \to \infty} \frac{g(\frac{p_m+1}{2^m})-g(\frac{p_m}{2^m})}{2^{-m}}
    </md>
    
   </p>

   <p>
    Now
    <md>
      g(\frac{p_m}{2^m}) = \sum_{n=0}^{m-1} 2^{-n}h(\frac{2^n p_m}{2^m}) + 2^{-m}h(p_m) + \sum_{n=m+1}^{\infty} 2^{-n}h(\frac{2^n p_m}{2^m})
    </md>
    
   </p>

   <p>
    If <m>n &gt; m</m>, then <m>h(\frac{2^n p_m}{2^m}) = h(2^{n-m}p_m)= 0</m>.
   </p>

   <p>
    If <m>n &lt;m</m> then <m>h(\frac{2^n p_m}{2^m}) = \pm 1</m>, where the sign depends on whether <m>\frac{2^n p_m}{2^m}</m> lies on a line segment with positive slope or negative slope.
   </p>

   <p>
    Finally <m>h(p_m)</m> = <m>1</m> if <m>p_m</m> is odd and <m>0</m> if <m>p_m</m> is even.
   </p>

   <p>
    For <m>g(\frac{p_m+1}{2^m})</m> everything is the same except that <m>h(p_m+1) = 0</m> if <m>p_m</m> is odd and <m>1</m> if <m>p_m</m> is even.
   </p>

   <p>
    Thus <m>g(\frac{p_m+1}{2^m})-g(\frac{p_m}{2^m}) = 2^{-m}</m> if <m>p_m</m> is even and <m>-2^{-m}</m> if <m>p_m</m> is odd.
   </p>

   <p>
    Therefore 
    <md>
      g'(x) = \lim_{m \to \infty} \frac{g(\frac{p_m+1}{2^m})-g(\frac{p_m}{2^m})}{2^{-m}} = \lim_{m \to \infty}  \frac{\pm 2^{-m}}{2^{-m}}
    </md>

    where the sign is positive if <m>p_m</m> is even and negative if <m>p_m</m> is odd.
    
   </p>

   <p>
    Since this sequence alternates between <m>-1</m> and <m>1</m>, the limit doesn't exist and thus <m>g</m> is not differentiable at <m>x</m>. Since <m>x</m> was arbitrary, this shows that <m>g</m> is nowhere differentiable.
   </p>

  </subsubsection>
</section>